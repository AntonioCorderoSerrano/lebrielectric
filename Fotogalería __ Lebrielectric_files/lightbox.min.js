document.addEventListener("DOMContentLoaded", function () {
    // Crear y añadir el contenedor de lightbox al documento
    const lightboxContainer = document.createElement("div");
    lightboxContainer.id = "lightbox";
    lightboxContainer.style.position = "fixed";
    lightboxContainer.style.top = 0;
    lightboxContainer.style.left = 0;
    lightboxContainer.style.width = "100%";
    lightboxContainer.style.height = "100%";
    lightboxContainer.style.backgroundColor = "rgba(0, 0, 0, 0.8)";
    lightboxContainer.style.display = "none";
    lightboxContainer.style.justifyContent = "center";
    lightboxContainer.style.alignItems = "center";
    lightboxContainer.style.zIndex = "1000";
    document.body.appendChild(lightboxContainer);

    const lightboxImage = document.createElement("img");
    lightboxImage.style.maxWidth = "80%";
    lightboxImage.style.maxHeight = "80%";
    lightboxContainer.appendChild(lightboxImage);

    // Botón de cerrar
    const closeButton = document.createElement("span");
    closeButton.innerHTML = "&times;";
    closeButton.style.position = "absolute";
    closeButton.style.top = "10px";
    closeButton.style.right = "20px";
    closeButton.style.fontSize = "30px";
    closeButton.style.color = "#fff";
    closeButton.style.cursor = "pointer";
    lightboxContainer.appendChild(closeButton);

    // Botón de siguiente
    const nextButton = document.createElement("button");
    nextButton.innerHTML = "&#10095;"; // Símbolo de flecha derecha
    nextButton.style.position = "absolute";
    nextButton.style.right = "20px";
    nextButton.style.top = "50%";
    nextButton.style.fontSize = "50px"; // Tamaño aumentado
    nextButton.style.color = "#fff";
    nextButton.style.background = "none";
    nextButton.style.border = "none";
    nextButton.style.cursor = "pointer";
    nextButton.style.transform = "translateY(-50%)";
    lightboxContainer.appendChild(nextButton);

    // Botón de anterior
    const prevButton = document.createElement("button");
    prevButton.innerHTML = "&#10094;"; // Símbolo de flecha izquierda
    prevButton.style.position = "absolute";
    prevButton.style.left = "20px";
    prevButton.style.top = "50%";
    prevButton.style.fontSize = "50px"; // Tamaño aumentado
    prevButton.style.color = "#fff";
    prevButton.style.background = "none";
    prevButton.style.border = "none";
    prevButton.style.cursor = "pointer";
    prevButton.style.transform = "translateY(-50%)";
    lightboxContainer.appendChild(prevButton);

    let currentIndex = 0;
    const galleryImages = Array.from(document.querySelectorAll("a[data-lightbox='gallery']"));

    function openLightbox(index) {
        currentIndex = index;
        lightboxImage.src = galleryImages[currentIndex].href;
        lightboxContainer.style.display = "flex";
    }

    function closeLightbox() {
        lightboxContainer.style.display = "none";
    }

    function nextImage() {
        currentIndex = (currentIndex + 1) % galleryImages.length;
        lightboxImage.src = galleryImages[currentIndex].href;
    }

    function previousImage() {
        currentIndex = (currentIndex - 1 + galleryImages.length) % galleryImages.length;
        lightboxImage.src = galleryImages[currentIndex].href;
    }

    galleryImages.forEach((link, index) => {
        link.addEventListener("click", function (e) {
            e.preventDefault();
            openLightbox(index);
        });
    });

    closeButton.addEventListener("click", closeLightbox);
    nextButton.addEventListener("click", nextImage);
    prevButton.addEventListener("click", previousImage);

    lightboxContainer.addEventListener("click", (e) => {
        if (e.target === lightboxContainer) closeLightbox();
    });

    document.addEventListener("keydown", (e) => {
        if (lightboxContainer.style.display === "flex") {
            if (e.key === "ArrowRight") nextImage();
            if (e.key === "ArrowLeft") previousImage();
            if (e.key === "Escape") closeLightbox();
        }
    });
});